import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

import java.util.*;

public class MultiplicativeDigitalRootTest {

    @Test
    public void testMultiplicativeDigitalRoot() {
        // Test cases for the multiplicativeDigitalRoot method
        assertArrayEquals(new long[]{123321, 6, 3}, MultiplicativeDigitalRoot.multiplicativeDigitalRoot(123321));
        assertArrayEquals(new long[]{7739, 3, 3}, MultiplicativeDigitalRoot.multiplicativeDigitalRoot(7739));
        assertArrayEquals(new long[]{893, 6, 2}, MultiplicativeDigitalRoot.multiplicativeDigitalRoot(893));
        assertArrayEquals(new long[]{899998, 2, 3}, MultiplicativeDigitalRoot.multiplicativeDigitalRoot(899998));
    }

    @Test
    public void testMDRTable() {
        // Expected MDR table for the first five numbers with the same MDR
        Map<Long, List<Long>> expectedTable = new HashMap<>();
        expectedTable.put(0L, Arrays.asList(0L, 10L, 20L, 25L, 30L));
        expectedTable.put(1L, Arrays.asList(1L, 11L, 111L, 1111L, 11111L));
        expectedTable.put(2L, Arrays.asList(2L, 12L, 21L, 26L, 34L));
        expectedTable.put(3L, Arrays.asList(3L, 13L, 31L, 113L, 131L));
        expectedTable.put(4L, Arrays.asList(4L, 14L, 22L, 27L, 39L));
        expectedTable.put(5L, Arrays.asList(5L, 15L, 35L, 51L, 53L));
        expectedTable.put(6L, Arrays.asList(6L, 16L, 23L, 28L, 32L));
        expectedTable.put(7L, Arrays.asList(7L, 17L, 71L, 117L, 171L));
        expectedTable.put(8L, Arrays.asList(8L, 18L, 24L, 29L, 36L));
        expectedTable.put(9L, Arrays.asList(9L, 19L, 33L, 91L, 119L));

        // Actual MDR table generated by the code
        Map<Long, List<Long>> actualTable = new HashMap<>();
        for (long i = 0; i < 10; i++)
            actualTable.put(i, new ArrayList<>());

        for (long cnt = 0, n = 0; cnt < 10;) {
            long[] res = MultiplicativeDigitalRoot.multiplicativeDigitalRoot(n++);
            List<Long> list = actualTable.get(res[1]);
            if (list.size() < 5) {
                list.add(res[0]);
                cnt = list.size() == 5 ? cnt + 1 : cnt;
            }
        }

        // Compare expected and actual tables
        assertEquals(expectedTable, actualTable);
    }
}
